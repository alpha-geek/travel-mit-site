{% extends "base_generic.html" %}

{% block title %}
Far Sighted Travel | World Map
{% endblock %}

{% block content %}
<div class = "content-full">
<article class = "top-content">
<content>
	<header><h2>World Map</h2></header>
	<div class = "map"></div>
	<script type="text/javascript">

			//Width and height
			var w = 800;
			var h = 500;

			//Define map projection
			var projection = d3.geo.equirectangular()
								   .translate([w/2, h/2])
								   .scale([150]);

			//Define path generator
			var path = d3.geo.path()
							 .projection(projection);

			//Create SVG element
			var svg = d3.select("div.map")
						.append("svg")
						.attr("width", w)
						.attr("height", h);
{% load staticfiles %}
			d3.json("{% static "json/worldcountries.json" %}", function(json) {
        		svg.selectAll("path")
		        .data(json.features)
		        .enter()
		        .append("path")
		        .attr("d", path)
		        .style("fill", "green");
d3.json("{% static "json/worldcities.json" %}", function(json) {
        		svg.selectAll("circle")
		        .data(json.features)
		        .enter()
		        .append("circle")
		        .attr("cx", function(d) {
		        	return projection([d.properties.LONGITUDE,d.properties.LATITUDE])[0]
		        })
		        .attr("cy", function(d) {
		        	return projection([d.properties.LONGITUDE,d.properties.LATITUDE])[1]
		        })
		        .attr("r", 2)
				.style("fill", "blue")
				.style("opacity", 0.75)
				.on("mouseover", function() {
				   		d3.select(this)
				   			.attr("fill","red");
				})
				.on("mouseout", function(d) {
        				d3.select(this)
      						.attr("fill", "blue");
      			})
      			.text(function(d) {
         				return d.NAME;
   				});


			});


				});


		    
			
		</script>


</content>
</article>
<div class = "destlist">
	<h4><a href="/destinations/bycountry">Browse Countries</a></h4><br />
<h4><a href="/destinations/bycity">Browse Cities</a></h4>
	</div>
</div>
{% endblock %}
